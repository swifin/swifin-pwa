"use strict";(()=>{var e={};e.id=496,e.ids=[496],e.modules={830:(e,r,t)=>{t.r(r),t.d(r,{config:()=>c,default:()=>l,routeModule:()=>p});var n={};t.r(n),t.d(n,{default:()=>f});var i=t(3480),o=t(8667),a=t(6435),s=t(7062);let u=require("cookie");var d=t.n(u);async function f(e,r){if("POST"!==e.method)return r.status(405).json({error:"Method Not Allowed"});let{swifinId:t,swifinPassword:n}=e.body;if(!t||!n)return r.status(400).json({error:"Swifin ID and Password are required."});try{let e=Buffer.from(`${t}:${n}`).toString("base64"),i=await fetch("https://api.swifin.com/rest/members/me",{headers:{Authorization:`Basic ${e}`,Accept:"application/json"}});if(!i.ok)return r.status(401).json({error:"Invalid Swifin ID or Password"});let o=await i.json(),a=(0,s.w)(t),u=(0,s.w)(n);return r.setHeader("Set-Cookie",[d().serialize("swifinId",a,{httpOnly:!0,secure:!0,sameSite:"Strict",path:"/",maxAge:604800}),d().serialize("swifinPassword",u,{httpOnly:!0,secure:!0,sameSite:"Strict",path:"/",maxAge:604800})]),r.status(200).json({profile:o})}catch(e){return console.error("[load-profile] Error:",e),r.status(500).json({error:"Internal Server Error"})}}let l=(0,a.M)(n,"default"),c=(0,a.M)(n,"config"),p=new i.PagesAPIRouteModule({definition:{kind:o.A.PAGES_API,page:"/api/swifin/load-profile",pathname:"/api/swifin/load-profile",bundlePath:"",filename:""},userland:n})},3480:(e,r,t)=>{e.exports=t(5600)},5600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6435:(e,r)=>{Object.defineProperty(r,"M",{enumerable:!0,get:function(){return function e(r,t){return t in r?r[t]:"then"in r&&"function"==typeof r.then?r.then(r=>e(r,t)):"function"==typeof r&&"default"===t?r:void 0}}})},7062:(e,r,t)=>{t.d(r,{Y:()=>s,w:()=>a});let n=require("crypto-js");var i=t.n(n);let o=process.env.SWIFIN_SECRET_KEY;function a(e){return i().AES.encrypt(e,o).toString()}function s(e){return i().AES.decrypt(e,o).toString(i().enc.Utf8)}},8667:(e,r)=>{Object.defineProperty(r,"A",{enumerable:!0,get:function(){return t}});var t=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})}};var r=require("../../../webpack-api-runtime.js");r.C(e);var t=r(r.s=830);module.exports=t})();